<!doctype html>
<html>

<head>
    <title>Sandbox</title>
    <link rel="stylesheet" href="res/css/main.css">

    <script src="src/ui/ctrl/Modules.js"></script>
    <script src="src/ui/basic/View.js"></script>
    <script src="src/ui/basic/DomElements.js"></script>
    <script src="src/ui/basic/ItemViews.js"></script>
    <script src="src/ui/UiMain.js"></script>
</head>

<body>
</body>

<script>   
    var mdl_Tests = new Module('mdl-test', null, 'Tests', null, [
        new Module('mdl-t1', null, 'Level One', null, [
            new Module('mdl-t1-a1', null, 'Stage 1.1', new TextView(null, 'Huiiii'))
        ])
    ]);
    var mdl_Mockups = new Module('mdl-mockups', null, 'MockUpds', new IFrame('mdl-wb-ifa', 'ui_modules/blkg-mockup.html'), []);
    var mdl_SvgEdit = new Module('mdl-svg-edit', null, 'SVG-Edit', new IFrame('mdl-wb-ifedit', 'ui_modules/svg-edit.html'), []);   
    var mdl_Svg = new Module('mdl-svg-icons', null, 'SVG-Icons', new IFrame('mdl-wb-ifb', 'ui_modules/svg-icons.html'), []);    
    var mdl_IPC = new Module('mdl-ipc',null, 'IPC-Test', new IFrame('mdl-ipc-frame','ui_modules/cross-doc.html'));

    var mdl_Sandbox = new Module('mdl-sandbox', null, 'Sandbox', null, [
        mdl_Mockups,
        mdl_SvgEdit,
        mdl_Svg,
        mdl_IPC,
        mdl_Tests
    ]);

</script>

<script>
    var root = new Module('mdl-root', null, '', []);
    var app = new AppFrame('ui-main');
    var NavbarMenu = null;
    app.setModules(mdl_Sandbox);

    document.body.appendChild(app.NODE);

    app.openModule(mdl_SvgEdit);
    //app.openModule(mdl_Mockups);
    //app.openModule(mdl_IPC);
    //setInterval(function(){
    //    try{
    //        let x = document.getElementById('mdl-wb-ifedit');
    //        x.setAttribute('src',x.getAttribute('src'));
    //    }catch(err){
    //
    //    }
    //},5000);
    
    window.onmessage = function(evt){
        var ifr = document.getElementById('mdl-ipc-frame');
        ifr.contentWindow.postMessage(evt.data,'*');
        ifr.contentWindow.postMessage('Send via IPC','*');        
        ifr.contentWindow.document.body.innerHTML += "<b>Created from MainWindow</b>";
    };
    //app.openEditor('ed-test-2', 'Testeditor', new View(null,'div'));  
    //app.openEditor('ed-test-3', 'Module_Sys', new View(null,'div'));  
    //app.openEditor('ed-test-1', 'Document one', new IFrame('mdl-wb-if','svg-icons.html'));
</script>

</html>